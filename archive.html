<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historical Website</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link rel="stylesheet" href="style.css"> <!-- Link to CSS file -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>

    <style>
        body {
            background-color: black;
            font-family: 'Montserrat', sans-serif;
        }
        .banner {
            background: url('images/archbg.jpg') no-repeat center center;
            background-size: cover;
            height: 900px;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            overflow: hidden;
        }
        .banner h2 {
            font-size: 4em;
            margin: 0;
            opacity: 0;
            transform: translateY(100%);
            animation: floatIn 2s forwards;
            text-shadow: 4px 4px 4px rgba(0, 0, 0, 0.9);
        }
        @keyframes floatIn {
            0% {
                opacity: 0;
                transform: translateY(100%);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .cart-button img{
            position: absolute;
            bottom: 20px;
            right: 20px;
            
            
        }
       
        
        .products-section {
            padding: 50px 0;
            text-align: center;
        }
        .products-section h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #333;
        }
        .product-card {
            background-color: #ffe9d8;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            width: 300px;
            margin: 20px;
            display: inline-block;
            vertical-align: top;
            text-align: center;
            padding: 20px;
            height: 550px; /* Fixed height for consistency */
            box-sizing: border-box; /* Include padding and border in the element's total width and height */
            position: relative; /* Ensure positioning of child elements */
        }
        .product-card img {
            border-radius: 10px;
            width: 100%;
            height: 200px;
            object-fit: cover;
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
        }
        .product-card h3 {
            font-size: 1.5em;
            margin: 15px 0;
            /* height: 40px; Fixed height to ensure consistency */
            overflow: hidden; /* Hide overflow text */
        }
        .product-card p {
            font-size: 1em;
            color: #666;
            /* height: 80px; Fixed height to ensure consistency */
            overflow: hidden; /* Hide overflow text */
        }
        .product-card a {
            display: inline-block;
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #e6985c;
            color: #fff;
            border-radius: 5px;
            text-decoration: none;
            position: absolute;
            bottom: 20px; /* Position the button at the bottom of the card */
            left: 50%;
            transform: translateX(-50%);
        }
        .product-card a:hover {
            background-color: #db842e;
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
        }
 /* Cart Popup */
 .cart-popup {
            display: none;
            position: fixed;
            top: 10%;
            left: 50%;
            transform: translate(-50%, 0);
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            width: 50%;
            max-width: 500px;
            padding: 20px;
            z-index: 1000;
        }
        .cart-popup table {
            width: 100%;
            border-collapse: collapse;
        }
        .cart-popup th, .cart-popup td {
            padding: 10px;
            text-align: left;
        }
        .cart-popup th {
            background-color: #f2f2f2;
        }
        .cart-popup td {
            border-bottom: 1px solid #f2f2f2;
        }
        .close-popup-x {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: transparent;
            color: black;
            border: none;
            font-size: 20px;
            cursor: pointer;
        }
        .close-popup-x:hover {
            color: red;
        }
        .generate-bill, .buy-now {
            display: block;
            margin: 10px auto;
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
        }
        .generate-bill:hover, .buy-now:hover {
            background-color: #0056b3;
        }


    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">
            <a href="index.html"><img src="images/logo.png" alt="Logo" /></a>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">Our Story</a></li>
                <li class="dropdown">
                    <a href="#section">What We Offer</a>
                    <ul class="dropdown-content">
                        <li><a href="history.html">History</a></li>
                        <li><a href="culture.html">Culture</a></li>
                        <li><a href="events.html">Events</a></li>
                        <li><a href="archive.html">Archive</a></li>
                        <li><a href="gallery.html">Image Gallery</a></li>
                        <li><a href="quiz.html">Quiz</a></li>
                        <li><a href="blog/blog.php">Blog</a></li>
                    </ul>
                </li>
                <li><a href="contact.html">Get in Touch</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <section class="banner">
        <h2>Explore "THE ARCHIVE"</h2>
        <button class="cart-button" onclick="openCart()"><img src="images/cart.png" style="width: 50px;"></button>
    </section>
    
    <!-- Products Section -->
    <section class="products-section">
        <div class="product-card">
            <div class="image-slideshow">
                <img src="images/book1.jpg" alt="Book">
                <!-- <img src="images/image1.jpg" alt="Book">
                <img src="images/image2.jpg" alt="Book"> -->
            </div>
            <h3>The Forgotten Palaces of Kolkata</h3>
            <p>A discovery of the old areas of the city, where heritage houses and history fill every crowded lane and secret courtyard. The Forgotten Palaces of Calcutta is an important contribution to the architectural history of both Calcutta and India.</p>
            <a href="#" onclick="addToCart('The Forgotten Palaces of Kolkata', 1200)">Add to Cart</a>
        </div>
        <div class="product-card">
            <div class="image-slideshow">
                <img src="images/book2.jpg" alt="Old CD">
                <!-- <img src="images/cd2.jpg" alt="Old CD">
                <img src="images/cd3.jpg" alt="Old CD"> -->
            </div>
            <h3>Calcutta Then And Now</h3>
            <p>Discover the rich tapestry of Kolkata's history with "Calcutta Then and Now," a captivating exploration of the city's transformation from a colonial outpost to a bustling modern metropolis. </p>
            <a href="#" onclick="addToCart('Calcutta Then And Now', 1500)">Add to Cart</a>
        </div>
        <div class="product-card">
            <div class="image-slideshow">
                <img src="images/book3.jpg" alt="Merchandise">
                <!-- <img src="images/merch2.jpg" alt="Merchandise">
                <img src="images/merch3.jpg" alt="Merchandise"> -->
            </div>
            <h3>Calcutta Then| Kolkata Now</h3>
            <p>Born in the Jorasanko area, north Calcutta, and brought up in Banaras, Pramod Kapoor is the founder and publisher of Roli Books.</p>
            <a href="#" onclick="addToCart('Calcutta Then| Kolkata Now', 1999)">Add to Cart</a>
        </div>
        <!-- Add more product cards as needed -->
    </section>

    
   
<!-- Cart Popup -->
<!-- Cart Popup -->
<div class="cart-popup" id="cartPopup">
    <button class="close-popup-x" onclick="closeCart()">X</button>
    <h2>Your Cart</h2>
    <table id="cartTable">
        <thead>
            <tr>
                <th>Product</th>
                <th>Price</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <!-- Cart items will be inserted here dynamically -->
        </tbody>
    </table>
    
    <button class="buy-now" onclick="buyNow()">Buy Now</button>
</div>



    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-widget">
                <h3>Pages</h3>
                <ul class="page-list">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">Our Story</a></li>
                    <li><a href="history.html">History</a></li>
                    <li><a href="culture.html">Culture</a></li>
                    <li><a href="events.html">Events</a></li>
                    <li><a href="archive.html">Archive</a></li>
                    <li><a href="gallery.html">Image Gallery</a></li>
                    <li><a href="quiz.html">Quiz</a></li>
                    <li><a href="blog/blog.php">Blog</a></li>
                    <li><a href="contact.html">Get in Touch</a></li>
                </ul>
            </div>
            <div class="footer-widget">
                <h3>Contact Info</h3>
                <p>123 Street Name,<br>City, Country</p>
                <p>Email: info@example.com</p>
                <p>Phone: +123456789</p>
            </div>
            <div class="footer-widget">
                <h3>Location</h3>
                <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d14738.841782131081!2d88.3532697!3d22.552517!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3a027705513adbb5%3A0x93aa9b8c01f6db31!2sPark%20Mansion!5e0!3m2!1sen!2sin!4v1722090760143!5m2!1sen!2sin" width="300" height="300" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>        
            </div>
        </div>
    </footer>

    
</body>
<button onclick="scrollToTop()" id="scrollToTopBtn" title="Go to top">
    &#8679;
</button>
<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script>
 const cart = [];

function addToCart(name, price) {
    cart.push({ name, price });
    Swal.fire({
        icon: 'success',
        title: 'Added to cart!',
        text: `${name} has been added to your cart.`,
        showConfirmButton: false,
        timer: 1500
    });
}

function openCart() {
    const cartPopup = document.getElementById('cartPopup');
    const cartTable = document.getElementById('cartTable');
    cartTable.innerHTML = '';
    cart.forEach((item, index) => {
        const row = document.createElement('tr');
        const nameCell = document.createElement('td');
        const priceCell = document.createElement('td');
        const actionCell = document.createElement('td');
        const removeButton = document.createElement('button');

        nameCell.textContent = item.name;
        priceCell.textContent = `Rs.${item.price.toFixed(2)}`;
        removeButton.textContent = 'Remove';
        removeButton.onclick = () => removeFromCart(index);

        actionCell.appendChild(removeButton);
        row.appendChild(nameCell);
        row.appendChild(priceCell);
        row.appendChild(actionCell);
        cartTable.appendChild(row);
    });
    cartPopup.style.display = 'block';
}

function closeCart() {
    document.getElementById('cartPopup').style.display = 'none';
}

function removeFromCart(index) {
    cart.splice(index, 1);
    openCart();
}

async function generatePDF(cartItems) {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    let y = 10;
    doc.text('Your Bill', 10, y);
    y += 10;

    cartItems.forEach((item, index) => {
        doc.text(`${index + 1}. ${item.name} - Rs.${item.price.toFixed(2)}`, 10, y);
        y += 10;
    });

    let total = cartItems.reduce((sum, item) => sum + item.price, 0);
    doc.text(`Total: Rs.${total.toFixed(2)}`, 10, y);

    return doc;
}

async function generateBill() {
    if (cart.length === 0) {
        Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Your cart is empty!',
        });
        return;
    }

    const doc = await generatePDF(cart);
    doc.save('bill.pdf');

    // After generating bill, clear the cart
    cart.length = 0;
    closeCart();
}

async function buyNow() {
    if (cart.length === 0) {
        Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Your cart is empty!',
        });
        return;
    }

    try {
        const response = await fetch('save_order.php', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(cart)
        });

        if (response.ok) {
            Swal.fire({
                icon: 'success',
                title: 'Order placed!',
                text: 'Your order has been successfully placed.',
            });

            const doc = await generatePDF(cart);
            doc.save('bill.pdf');

            cart.length = 0;
            closeCart();
        } else {
            throw new Error('Failed to place order');
        }
    } catch (error) {
        console.error('Error:', error);
        Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Something went wrong!',
        });
    }
}

function initializeSlideshow() {
const slideshows = document.querySelectorAll('.image-slideshow');
slideshows.forEach(slideshow => {
    let index = 0;
    const images = slideshow.querySelectorAll('img');
    images.forEach((img, idx) => {
        img.style.display = idx === 0 ? 'block' : 'none';
    });
    setInterval(() => {
        images[index].style.display = 'none';
        index = (index + 1) % images.length;
        images[index].style.display = 'block';
    }, 3000);
});
}

document.addEventListener('DOMContentLoaded', initializeSlideshow);


  
</script>
<script>
    // Get the button
    let mybutton = document.getElementById("scrollToTopBtn");
    
    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function() {scrollFunction()};
    
    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            mybutton.style.display = "block";
        } else {
            mybutton.style.display = "none";
        }
    }
    
    // When the user clicks on the button, scroll to the top of the document
    function scrollToTop() {
        document.body.scrollTop = 0;
        document.documentElement.scrollTop = 0;
    }
</script>
</html>
